diff --git a/bin/Makefile.am b/bin/Makefile.am
index 226a020..4bbbaf2 100644
--- a/bin/Makefile.am
+++ b/bin/Makefile.am
@@ -4,10 +4,6 @@
 
 sbin_SCRIPTS = wagon
 
-client_DATA = $(wildcard *.ycp)
-
-YCPCFLAGS = -M ../modules
-
-EXTRA_DIST = $(sbin_SCRIPTS) $(client_DATA)
+EXTRA_DIST = $(sbin_SCRIPTS)
 
 include $(top_srcdir)/Makefile.am.common
diff --git a/control/Makefile.am b/control/Makefile.am
index f5a7abb..68f3439 100644
--- a/control/Makefile.am
+++ b/control/Makefile.am
@@ -6,9 +6,7 @@ controldir = $(yast2dir)/control
 
 control_DATA = $(wildcard *.xml)
 
-desktop_DATA = $(wildcard *.desktop)
-
-EXTRA_DIST = $(desktop_DATA) $(control_DATA)
+EXTRA_DIST = $(control_DATA)
 
 check-local:
 	xmllint --relaxng $(controldir)/control.rng --noout $(control_DATA)
diff --git a/testsuite/Makefile.am b/testsuite/Makefile.am
index a1881b8..d8fd043 100644
--- a/testsuite/Makefile.am
+++ b/testsuite/Makefile.am
@@ -5,7 +5,7 @@
 #
 
 AUTOMAKE_OPTIONS = dejagnu
-EXTRA_DIST = $(wildcard tests/*.out) $(wildcard tests/*.err) $(wildcard tests/*.ycp) $(wildcard tests/*.yh) $(wildcard tests/*.xml)
+EXTRA_DIST = $(wildcard tests/*.out) $(wildcard tests/*.err) $(wildcard tests/*.rb) $(wildcard tests/*.xml)
 
 testsuite_prepare = @ydatadir@/testsuite/Makefile.testsuite
 
diff --git a/yast2-wagon.spec.in b/yast2-wagon.spec.in
index 12d22e6..1bd8928 100644
--- a/yast2-wagon.spec.in
+++ b/yast2-wagon.spec.in
@@ -39,6 +39,8 @@ Requires:	wagon-control-file
 
 BuildArchitectures:	noarch
 
+Requires:       yast2-ruby-bindings >= 1.0.0
+
 Summary: YaST2 - Migration Tool for Service Packs
 
 %description
@@ -62,11 +64,10 @@ rm -rf %{buildroot}%%{_datadir}/YaST2/control/online_migration.xml
 %files
 %defattr(-,root,root)
 %{_prefix}/sbin/wagon
-@clientdir@/*.ycp
-@moduledir@/*.ycp
-@moduledir@/*.ybc
+@clientdir@/*.rb
+@moduledir@/*.rb
 %dir @yncludedir@/wagon
-@yncludedir@/wagon/*.ycp
+@yncludedir@/wagon/*.rb
 @desktopdir@/*.desktop
 %doc @docdir@
 %dir /var/lib/YaST2/wagon/
